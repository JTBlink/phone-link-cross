# æ„å»ºè„šæœ¬ç›®å½•

è¿™ä¸ªç›®å½•åŒ…å«äº† phone-linkc iOS è®¾å¤‡ç®¡ç†å™¨çš„æ‰€æœ‰æ„å»ºå’Œå·¥å…·è„šæœ¬ã€‚

## è„šæœ¬æ–‡ä»¶

### ä¸»æ„å»ºè„šæœ¬

#### `build-impl.sh` (Linux/macOS)
å®Œæ•´çš„æ„å»ºè„šæœ¬å®ç°ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š
- Qt ç¯å¢ƒæ£€æµ‹å’Œé…ç½®
- libimobiledevice ä¾èµ–æ£€æŸ¥
- CMake é¡¹ç›®é…ç½®
- ç¼–è¯‘å’Œè¿è¡Œ

**ä½¿ç”¨æ–¹æ³•:**
```bash
./build-impl.sh              # å®Œæ•´æ„å»ºæµç¨‹
./build-impl.sh clean        # æ¸…ç†æ„å»ºæ–‡ä»¶
./build-impl.sh install-deps # æ˜¾ç¤ºä¾èµ–å®‰è£…å‘½ä»¤
./build-impl.sh help         # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

#### `build-impl.bat` (Windows)
Windows ç‰ˆæœ¬çš„æ„å»ºè„šæœ¬å®ç°ï¼š
- Qt ç¯å¢ƒæ£€æµ‹
- Visual Studio ç¼–è¯‘å™¨æ£€æŸ¥
- CMake é¡¹ç›®é…ç½®
- Windows ç‰¹å®šçš„æ„å»ºæµç¨‹

**ä½¿ç”¨æ–¹æ³•:**
```cmd
build-impl.bat               # å®Œæ•´æ„å»ºæµç¨‹
build-impl.bat clean         # æ¸…ç†æ„å»ºæ–‡ä»¶
build-impl.bat install-deps  # æ˜¾ç¤ºä¾èµ–å®‰è£…æŒ‡å—
build-impl.bat help          # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### ä¾èµ–è¯Šæ–­è„šæœ¬

#### `check-deps.sh` (Linux/macOS)
æ™ºèƒ½ä¾èµ–æ£€æµ‹å’Œè¯Šæ–­è„šæœ¬ï¼š
- è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿæ¶æ„ (Intel/Apple Silicon Mac)
- éªŒè¯ Homebrew å’Œ pkg-config é…ç½®
- æ£€æŸ¥ libimobiledevice ç›¸å…³åŒ…çŠ¶æ€
- æ–‡ä»¶ç³»ç»Ÿçº§åˆ«çš„éªŒè¯
- è‡ªåŠ¨å®‰è£…ç¼ºå¤±ä¾èµ–çš„é€‰é¡¹

**åŠŸèƒ½ç‰¹æ€§:**
- ğŸ” å…¨é¢è¯Šæ–­ä¾èµ–çŠ¶æ€
- ğŸ› ï¸ è‡ªåŠ¨ä¿®å¤é…ç½®é—®é¢˜
- ğŸ¨ å½©è‰²è¾“å‡ºï¼Œæ˜“äºè¯†åˆ«é—®é¢˜
- ğŸš€ ä¸€é”®è‡ªåŠ¨å®‰è£…åŠŸèƒ½

**ä½¿ç”¨æ–¹æ³•:**
```bash
./check-deps.sh         # è¿è¡Œå®Œæ•´è¯Šæ–­
```

## è„šæœ¬æ¶æ„

### æ–‡ä»¶ç»„ç»‡
```
phone-linkc/
â”œâ”€â”€ build.sh                    # ä¸»å…¥å£è„šæœ¬ (è°ƒç”¨ scripts/ ä¸‹çš„å·¥å…·)
â”œâ”€â”€ build.bat                   # Windows ä¸»å…¥å£è„šæœ¬
â””â”€â”€ scripts/                    # å®é™…çš„å·¥å…·è„šæœ¬
    â”œâ”€â”€ build-impl.sh           # Unix æ„å»ºè„šæœ¬å®ç°
    â”œâ”€â”€ build-impl.bat          # Windows æ„å»ºè„šæœ¬å®ç°
    â”œâ”€â”€ check-deps.sh           # ä¾èµ–è¯Šæ–­è„šæœ¬
    â””â”€â”€ README.md               # æœ¬æ–‡ä»¶
```

### è°ƒç”¨å…³ç³»
```
ä¸»å…¥å£è„šæœ¬ (phone-linkc/build.sh)
    â†“
è°ƒç”¨å­è„šæœ¬ (scripts/check-deps.sh, scripts/build-impl.sh)
    â†“
æ‰§è¡Œå…·ä½“åŠŸèƒ½ (ä¾èµ–æ£€æŸ¥, é¡¹ç›®æ„å»º)
```

## å¹³å°æ”¯æŒ

### macOS
- âœ… å®Œæ•´æ”¯æŒ Intel å’Œ Apple Silicon Mac
- âœ… è‡ªåŠ¨æ£€æµ‹ Homebrew è·¯å¾„
- âœ… æ”¯æŒçœŸå® iOS è®¾å¤‡ (é€šè¿‡ libimobiledevice)
- âœ… æ¨¡æ‹Ÿæ¨¡å¼å›é€€

### Linux (Ubuntu/Debian)
- âœ… apt åŒ…ç®¡ç†å™¨æ”¯æŒ
- âœ… æ”¯æŒçœŸå® iOS è®¾å¤‡ (é€šè¿‡ libimobiledevice)
- âœ… æ¨¡æ‹Ÿæ¨¡å¼å›é€€

### Windows
- âœ… Visual Studio ç¼–è¯‘å™¨æ”¯æŒ
- âš ï¸  ä¸»è¦ä½¿ç”¨æ¨¡æ‹Ÿæ¨¡å¼ (libimobiledevice å®‰è£…å¤æ‚)
- âœ… å®Œæ•´çš„ Qt ç•Œé¢æ”¯æŒ

## ä½¿ç”¨å»ºè®®

### é¦–æ¬¡ä½¿ç”¨
1. **è¿è¡Œä¾èµ–æ£€æŸ¥**: `./build.sh check-deps`
2. **æŸ¥çœ‹å®‰è£…å»ºè®®**: æ ¹æ®æ£€æŸ¥ç»“æœå®‰è£…ç¼ºå¤±ä¾èµ–
3. **æ‰§è¡Œå®Œæ•´æ„å»º**: `./build.sh`

### å¼€å‘è¿‡ç¨‹ä¸­
- **å¿«é€Ÿæ„å»º**: `./build.sh build`
- **æ¸…ç†é‡å»º**: `./build.sh clean` ç„¶å `./build.sh build`
- **ä¾èµ–é—®é¢˜**: `./build.sh check-deps` é‡æ–°è¯Šæ–­

### æ•…éšœæ’é™¤
1. è¿è¡Œ `./build.sh check-deps` è·å–è¯¦ç»†è¯Šæ–­ä¿¡æ¯
2. æŸ¥çœ‹ [libimobiledevice æ•…éšœæ’é™¤æŒ‡å—](../doc/libimobiledevice-troubleshooting.md)
3. æ£€æŸ¥ [é¡¹ç›®æ–‡æ¡£](../README.md) çš„ç¯å¢ƒè¦æ±‚éƒ¨åˆ†

## è„šæœ¬å¼€å‘

### æ·»åŠ æ–°è„šæœ¬
1. å°†æ–°è„šæœ¬æ·»åŠ åˆ° `scripts/` ç›®å½•
2. è®¾ç½®æ‰§è¡Œæƒé™: `chmod +x scripts/new-script.sh`
3. åœ¨ä¸»å…¥å£è„šæœ¬ä¸­æ·»åŠ è°ƒç”¨é€»è¾‘
4. æ›´æ–°æ­¤ README æ–‡æ¡£

### ç¼–ç è§„èŒƒ
- ä½¿ç”¨ bash shebang: `#!/bin/bash`
- è®¾ç½®é”™è¯¯é€€å‡º: `set -e`
- æä¾›å½©è‰²è¾“å‡ºå’Œç”¨æˆ·å‹å¥½çš„æç¤º
- åŒ…å«è¯¦ç»†çš„é”™è¯¯æ£€æŸ¥å’Œå¤„ç†
- æ·»åŠ å¸®åŠ©ä¿¡æ¯å’Œä½¿ç”¨è¯´æ˜
