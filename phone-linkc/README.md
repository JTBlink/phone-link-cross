# iOS è®¾å¤‡ç®¡ç†å™¨ (phone-linkc)

> åŸºäº Qt 6 å’Œ libimobiledevice çš„è·¨å¹³å° iOS è®¾å¤‡ç®¡ç†åº”ç”¨

## ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Qt åº”ç”¨ç¨‹åºç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ libimobiledevice åº“æ¥ç®¡ç† iOS è®¾å¤‡ã€‚è¯¥é¡¹ç›®æä¾›äº†è®¾å¤‡å‘ç°ã€è¿æ¥ç®¡ç†å’Œè®¾å¤‡ä¿¡æ¯è·å–ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### ä¸»è¦ç‰¹æ€§

- âœ… **å®æ—¶è®¾å¤‡å‘ç°**: è‡ªåŠ¨æ£€æµ‹è¿æ¥çš„ iOS è®¾å¤‡
- âœ… **è®¾å¤‡è¿æ¥ç®¡ç†**: å»ºç«‹å’Œç®¡ç†è®¾å¤‡è¿æ¥
- âœ… **è¯¦ç»†è®¾å¤‡ä¿¡æ¯**: è·å–ç¡¬ä»¶å’Œè½¯ä»¶ä¿¡æ¯
- âœ… **ç”¨æˆ·å‹å¥½ç•Œé¢**: Qt å›¾å½¢ç•Œé¢
- âœ… **æ¨¡æ‹Ÿæ¨¡å¼**: æ— éœ€çœŸå®è®¾å¤‡å³å¯æµ‹è¯•
- âœ… **è·¨å¹³å°æ”¯æŒ**: Windowsã€macOSã€Linux

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

**å¿…éœ€ä¾èµ–:**
- Qt 6.5+
- CMake 3.19+
- C++17 ç¼–è¯‘å™¨

**å¯é€‰ä¾èµ– (æ¨è):**
- libimobiledevice (ç”¨äºçœŸå® iOS è®¾å¤‡æ”¯æŒ)
- libplist
- libusbmuxd

### 2. å®‰è£…ä¾èµ–

#### macOS (Homebrew)
```bash
# å¿…éœ€ç»„ä»¶
brew install qt6 cmake

# å¯é€‰ - iOS è®¾å¤‡æ”¯æŒ
brew install libimobiledevice libplist libusbmuxd
```

#### Ubuntu/Debian
```bash
# å¿…éœ€ç»„ä»¶
sudo apt-get install qt6-base-dev qt6-tools-dev cmake

# å¯é€‰ - iOS è®¾å¤‡æ”¯æŒ
sudo apt-get install libimobiledevice-dev libplist-dev libusbmuxd-dev
```

#### Windows
```powershell
# ä½¿ç”¨ vcpkg (æ¨è)
vcpkg install qt6 cmake

# å¯é€‰ - iOS è®¾å¤‡æ”¯æŒ
vcpkg install libimobiledevice libplist libusbmuxd
```

### 3. ç¼–è¯‘å’Œè¿è¡Œ

#### ä½¿ç”¨æ„å»ºè„šæœ¬ (æ¨è)

**Linux/macOS:**
```bash
./build.sh
```

**Windows:**
```cmd
build.bat
```

æ„å»ºè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- æ£€æµ‹ç³»ç»Ÿä¸­çš„ Qt å®‰è£…
- æŸ¥æ‰¾å¸¸è§çš„ Qt è·¯å¾„ï¼ˆåŒ…æ‹¬ ~/Qt ç›®å½•ï¼‰
- é…ç½®åˆé€‚çš„ CMake å‚æ•°
- ç¼–è¯‘å¹¶å¯é€‰æ‹©è¿è¡Œé¡¹ç›®

#### æ‰‹åŠ¨ç¼–è¯‘

```bash
# åˆ›å»ºæ„å»ºç›®å½•
mkdir build && cd build

# é…ç½®é¡¹ç›®
cmake .. -DCMAKE_BUILD_TYPE=Release

# ç¼–è¯‘
cmake --build . --config Release

# è¿è¡Œ
./phone-linkc          # Linux/macOS
# æˆ–
Release/phone-linkc.exe  # Windows
```

## ä½¿ç”¨è¯´æ˜

### ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ iOS è®¾å¤‡ç®¡ç†å™¨ - libimobiledevice ç¤ºä¾‹                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è®¾å¤‡åˆ—è¡¨        â”‚ è®¾å¤‡è¯¦ç»†ä¿¡æ¯                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                        â”‚
â”‚ â”‚ iPhone 15   â”‚  â”‚ è®¾å¤‡åç§°: iPhone 15                     â”‚
â”‚ â”‚ 00000000... â”‚  â”‚ iOSç‰ˆæœ¬: 17.1.1                       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ å­˜å‚¨å®¹é‡: 128 GB                       â”‚
â”‚                  â”‚ ...                                   â”‚
â”‚ [è¿æ¥è®¾å¤‡]        â”‚                                        â”‚
â”‚ [åˆ·æ–°åˆ—è¡¨]        â”‚                                        â”‚
â”‚ [è·å–ä¿¡æ¯]        â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çŠ¶æ€æ : æ‰¾åˆ° 1 å°è®¾å¤‡                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åŸºæœ¬æ“ä½œ

1. **è®¾å¤‡å‘ç°**: åº”ç”¨å¯åŠ¨åè‡ªåŠ¨å¼€å§‹æ‰«æ iOS è®¾å¤‡
2. **é€‰æ‹©è®¾å¤‡**: åœ¨å·¦ä¾§åˆ—è¡¨ä¸­ç‚¹å‡»è®¾å¤‡åç§°
3. **è¿æ¥è®¾å¤‡**: ç‚¹å‡»"è¿æ¥è®¾å¤‡"æŒ‰é’®å»ºç«‹è¿æ¥
4. **è·å–ä¿¡æ¯**: ç‚¹å‡»"è·å–ä¿¡æ¯"æŒ‰é’®æŸ¥çœ‹è¯¦ç»†è®¾å¤‡ä¿¡æ¯
5. **åˆ·æ–°åˆ—è¡¨**: ç‚¹å‡»"åˆ·æ–°åˆ—è¡¨"æ‰‹åŠ¨æ›´æ–°è®¾å¤‡åˆ—è¡¨

### åŠŸèƒ½è¯´æ˜

#### çœŸå®è®¾å¤‡æ¨¡å¼ (éœ€è¦ libimobiledevice)
- æ£€æµ‹çœŸå®è¿æ¥çš„ iOS è®¾å¤‡
- è·å–å®Œæ•´çš„è®¾å¤‡ç¡¬ä»¶ä¿¡æ¯
- æ”¯æŒè®¾å¤‡é…å¯¹å’Œä¿¡ä»»ç®¡ç†

#### æ¨¡æ‹Ÿæ¨¡å¼ (æ—  libimobiledevice)
- æ¨¡æ‹Ÿè®¾å¤‡å‘ç°è¿‡ç¨‹
- æä¾›ç¤ºä¾‹è®¾å¤‡æ•°æ®
- ç”¨äºå¼€å‘å’Œç•Œé¢æµ‹è¯•

## é¡¹ç›®ç»“æ„

```
phone-linkc/
â”œâ”€â”€ CMakeLists.txt          # CMake æ„å»ºé…ç½®
â”œâ”€â”€ build.sh               # Linux/macOS æ„å»ºè„šæœ¬
â”œâ”€â”€ build.bat              # Windows æ„å»ºè„šæœ¬
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ main.cpp               # åº”ç”¨ç¨‹åºå…¥å£
â”œâ”€â”€ mainwindow.h/.cpp/.ui  # ä¸»çª—å£å®ç°
â”œâ”€â”€ devicemanager.h/.cpp   # è®¾å¤‡ç®¡ç†å™¨
â”œâ”€â”€ deviceinfo.h/.cpp      # è®¾å¤‡ä¿¡æ¯ç®¡ç†
â””â”€â”€ phone-linkc_zh_CN.ts   # ä¸­æ–‡æœ¬åœ°åŒ–
```

## æ ¸å¿ƒ API ç¤ºä¾‹

### è®¾å¤‡ç®¡ç†

```cpp
#include "devicemanager.h"

// åˆ›å»ºè®¾å¤‡ç®¡ç†å™¨
DeviceManager *manager = new DeviceManager(this);

// ç›‘å¬è®¾å¤‡äº‹ä»¶
connect(manager, &DeviceManager::deviceFound, 
        [](const QString &udid, const QString &name) {
    qDebug() << "å‘ç°è®¾å¤‡:" << name;
});

// å¼€å§‹è®¾å¤‡å‘ç°
manager->startDiscovery();

// è¿æ¥åˆ°è®¾å¤‡
manager->connectToDevice("device-udid");
```

### è®¾å¤‡ä¿¡æ¯è·å–

```cpp
#include "deviceinfo.h"

// åˆ›å»ºä¿¡æ¯ç®¡ç†å™¨
DeviceInfoManager *infoManager = new DeviceInfoManager(this);

// è·å–è®¾å¤‡ä¿¡æ¯
DeviceInfo info = infoManager->getDeviceInfo("device-udid");

qDebug() << "è®¾å¤‡åç§°:" << info.name;
qDebug() << "iOSç‰ˆæœ¬:" << info.productVersion;
qDebug() << "å­˜å‚¨å®¹é‡:" << info.totalCapacity / (1024*1024*1024) << "GB";
```

## æ‰©å±•åŠŸèƒ½

è¿™ä¸ªé¡¹ç›®å¯ä»¥ä½œä¸ºåŸºç¡€ï¼Œæ‰©å±•å‡ºæ›´å¤šåŠŸèƒ½ï¼š

- **åº”ç”¨ç®¡ç†**: å®‰è£…/å¸è½½åº”ç”¨
- **æ–‡ä»¶ä¼ è¾“**: ä¸Šä¼ /ä¸‹è½½æ–‡ä»¶
- **è®¾å¤‡å¤‡ä»½**: åˆ›å»ºå’Œæ¢å¤å¤‡ä»½
- **å±å¹•é•œåƒ**: å®æ—¶å±å¹•æ˜¾ç¤º
- **æ€§èƒ½ç›‘æ§**: CPUã€å†…å­˜ä½¿ç”¨æƒ…å†µ

å‚è€ƒæ–‡æ¡£ä¸­çš„æ‰©å±•ç¤ºä¾‹äº†è§£æ›´å¤šä¿¡æ¯ã€‚

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Qt æ‰¾ä¸åˆ°**
   ```bash
   # ç¡®ä¿ Qt å·²æ­£ç¡®å®‰è£…å¹¶æ·»åŠ åˆ° PATH
   which qmake  # Linux/macOS
   where qmake  # Windows
   ```

2. **libimobiledevice æ‰¾ä¸åˆ°**
   ```bash
   # æ£€æŸ¥æ˜¯å¦å®‰è£…
   pkg-config --exists libimobiledevice-1.0
   
   # å¦‚æœæœªå®‰è£…ï¼Œåº”ç”¨ä¼šè‡ªåŠ¨å¯ç”¨æ¨¡æ‹Ÿæ¨¡å¼
   ```

3. **è®¾å¤‡æ— æ³•å‘ç°**
   - ç¡®ä¿è®¾å¤‡å·²è§£é”
   - ä¿¡ä»»æ­¤è®¡ç®—æœº
   - æ£€æŸ¥ USB è¿æ¥
   - ç¡®ä¿ iTunes/3uTools ç­‰å·¥å…·æœªå ç”¨è®¾å¤‡

4. **ç¼–è¯‘é”™è¯¯**
   - æ£€æŸ¥ Qt ç‰ˆæœ¬ (éœ€è¦ 6.5+)
   - æ£€æŸ¥ CMake ç‰ˆæœ¬ (éœ€è¦ 3.19+)
   - ç¡®ä¿ C++17 æ”¯æŒ

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡º:

```cpp
// åœ¨ main.cpp ä¸­æ·»åŠ 
QLoggingCategory::setFilterRules("*.debug=true");
```

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯ï¼Œè¯¦è§ LICENSE æ–‡ä»¶ã€‚

## å‚è€ƒèµ„æº

- [libimobiledevice å®˜ç½‘](https://libimobiledevice.org/)
- [Qt å®˜æ–¹æ–‡æ¡£](https://doc.qt.io/)
- [é¡¹ç›®å®Œæ•´æ–‡æ¡£](../doc/examples/qt-libimobiledevice-example.md)
- [æœ€ä½³å®è·µæŒ‡å—](../doc/examples/libimobiledevice-best-practices.md)

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

ğŸ“± äº«å— iOS è®¾å¤‡ç®¡ç†çš„ä¾¿åˆ©ï¼
